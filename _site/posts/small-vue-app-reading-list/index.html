<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>A small Vue app - Reading List – Sam Hermes</title>
<meta name="description"
    content="Getting into new JavaScript is difficult when you don’t have something useful to build with it, so I was excited when I put it together that I could add Vue ...">

<link rel="stylesheet" href="/css/main.css?v=1.0.7">

<link rel="canonical" href="http://localhost:4000/posts/small-vue-app-reading-list/">
<link rel="alternate" type="application/rss+xml" title="Sam Hermes"
    href="http://localhost:4000/feed.xml">
<link rel="alternate" type="application/json" title="Sam Hermes"
    href="http://localhost:4000/feed.json" />

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-133352732-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-133352732-1');
</script>


<body class="page-a-small-vue-app-reading-list">
    <header class="site-header group">
	<div class="contain">
    <a class="logotype" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="295" height="36" viewBox="0 0 295 36"><path fill="#ffffff" d="M.24 28.08l4.46-3.52c2.5 4.04 5.98 5.92 10.3 5.92 4.61 0 7-2.26 7-5.36 0-4.09-4.37-4.89-8.98-5.87-5.3-1.09-10.94-2.5-10.94-9.36 0-5.36 4.89-9.82 11.8-9.82 5.87 0 9.73 2.11 13.06 5.87l-4.23 3.34c-2.02-2.73-4.37-4.56-8.83-4.56-4.61 0-6.53 2.16-6.53 5.12 0 3.48 4.04 4.14 8.51 5.08 5.4 1.13 11.42 2.68 11.42 10.15 0 5.26-4.32 10.25-12.13 10.25C8 35.32 3.49 32.5.24 28.08zM31.36 27.84c0-5.22 4.32-8.41 11.42-8.41h7.52v-.42c0-3.38-2.07-5.73-6.58-5.73-3.34 0-5.83 1.6-7.28 4.09l-4.51-2.63c2.49-3.34 6.39-5.78 11.84-5.78 7.28 0 11.42 4.04 11.42 10.2v15.7H50.3V30.4c-2.02 3.01-5.73 4.98-9.96 4.98-5.88-.02-8.98-3.26-8.98-7.54zm18.94-2.25v-2.12h-7.19c-4.7 0-6.58 1.46-6.58 3.95 0 2.21 1.5 3.52 4.89 3.52 3.61.01 7.23-2.02 8.88-5.35zM60.92 9.47h5.03v2.91c1.55-2.12 3.95-3.43 7.19-3.43 4.04 0 6.72 1.69 8.08 4.46 1.6-2.68 4.51-4.46 8.27-4.46 6.96 0 10.2 4.18 10.2 10.72v15.18h-5.22v-14.9c0-3.95-1.74-6.53-5.73-6.53-3.62 0-5.97 2.35-5.97 7v14.43h-5.12V19.62c0-3.85-1.74-6.2-5.59-6.2-3.76 0-6.06 2.44-6.06 7.24v14.19h-5.08V9.47zM138.84 20.04h-16.45v14.8h-5.12V.54h5.12v14.62h16.45V.54h5.08v34.31h-5.08V20.04zM148.76 22.25c0-7.47 5.73-13.3 13.21-13.3s13.02 5.45 13.02 12.97v2.12h-21.34c.75 4.09 3.95 6.81 8.6 6.81 3.57 0 5.92-1.64 7.43-4.09l4.18 2.49c-2.44 3.67-6.11 6.11-11.61 6.11-8.08 0-13.49-5.73-13.49-13.11zm5.08-2.54h16.03c-.75-3.99-3.71-6.3-7.9-6.3-4.04.01-7.15 2.64-8.13 6.3zM179.88 9.47h4.98v4.42c1.08-3.2 3.67-4.79 6.91-4.79 1.74 0 3.29.38 4.28.99l-1.97 4.89c-.7-.47-1.74-.75-3.2-.75-3.62 0-5.92 1.79-5.92 6.34v14.29h-5.08V9.47zM200.04 9.47h5.03v2.91c1.55-2.12 3.95-3.43 7.19-3.43 4.04 0 6.72 1.69 8.08 4.46 1.6-2.68 4.51-4.46 8.27-4.46 6.96 0 10.2 4.18 10.2 10.72v15.18h-5.22v-14.9c0-3.95-1.74-6.53-5.73-6.53-3.62 0-5.97 2.35-5.97 7v14.43h-5.12V19.62c0-3.85-1.74-6.2-5.59-6.2-3.76 0-6.06 2.44-6.06 7.24v14.19h-5.08V9.47zM243.61 22.25c0-7.47 5.73-13.3 13.21-13.3 7.47 0 13.02 5.45 13.02 12.97v2.12H248.5c.75 4.09 3.95 6.81 8.6 6.81 3.57 0 5.92-1.64 7.43-4.09l4.18 2.49c-2.44 3.67-6.11 6.11-11.61 6.11-8.09 0-13.49-5.73-13.49-13.11zm5.07-2.54h16.03c-.75-3.99-3.71-6.3-7.9-6.3-4.04.01-7.14 2.64-8.13 6.3zM272.75 29.77l4.56-2.58c1.55 2.4 3.71 3.76 6.86 3.76 3.29 0 5.03-1.64 5.03-3.57 0-2.21-3.1-2.72-6.44-3.43-4.28-.89-8.84-2.3-8.84-7.47 0-3.95 3.81-7.61 9.78-7.57 4.75 0 7.99 1.74 10.2 4.75l-4.37 2.49c-1.27-1.88-3.1-3.01-5.83-3.01-3.1 0-4.61 1.46-4.61 3.24 0 2.02 2.3 2.49 6.16 3.34 4.23.89 9.02 2.35 9.02 7.61 0 3.71-3.34 8.08-10.34 8.04-5.36-.01-9.02-1.93-11.18-5.6z"/></svg><span class="screen-reader-text">Sam Hermes</span></a>
    <ul class="site-nav">
      <li><a href="/posts">Posts</a></li>
      <li><a href="/projects">Projects</a></li>
    </ul>
   	</div>
</header>

    <div class="page">
        <article class="post">

  <header class="post-header">
    <p class="post-meta"><time>January 24, 2018</time></p>
    <h1 class="post-title">A small Vue app - Reading List</h1>
  </header>

  <div class="post-content">
    <p>Getting into new JavaScript is difficult when you don’t have something useful to build with it, so I was excited when I put it together that I could add Vue to my existing reading list. I’ve had it as static content for a little while now. Making updates is manual, and ends up with lots of repeated code. So, my idea was to move the listings to a WordPress install, and then bring them into the page and display them using Vue. Here’s how I did that.</p>

<h2 id="starting-somewhere">Starting somewhere</h2>

<p>It’s always good to have somewhere to start, and I got over the initial hump by looking over Brian Krogsgard’s example Vue project on CodePen. He’s pulling in posts from Post Status and displaying them on the page. Fairly simple, but it also includes a toggle to switch between authors. This translated well to the distinction on my reading list between books I’ve completed and ones I’m currently reading. I was pretty excited to see that the amount of code to get going was minimal.</p>

<h2 id="prepping-wordpress">Prepping WordPress</h2>

<p>I have a WordPress environment that runs on samhermes.co, and so I fired up a new site there. It is just using a default theme, since all I need to use is a REST API endpoint. I wonder what you’d do if all you wanted was the endpoints from your site? Could you remove everything else from public view? These are questions for another day. After I had loaded in the books, I added them to two categories, one for current and one for completed. Then, I wanted to add the author of each book, so I activated ACF and created a field called “Author” and loaded in the data.</p>

<p>Before the REST API endpoint is totally ready to go, the custom field needs to be added. By default, anything you add with ACF isn’t going to show up in the response. The following function will add all fields to the response.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="nf">acf_rest_api</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">register_rest_field</span><span class="p">(</span> <span class="s1">'post'</span><span class="p">,</span>
    <span class="s1">'fields'</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
      <span class="s1">'get_callback'</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$field</span><span class="p">,</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nb">function_exists</span><span class="p">(</span> <span class="s1">'get_fields'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">get_fields</span><span class="p">(</span> <span class="nv">$data</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">[];</span>
      <span class="p">},</span>
      <span class="s1">'update_callback'</span> <span class="o">=&gt;</span> <span class="kc">null</span><span class="p">,</span>
      <span class="s1">'schema'</span> <span class="o">=&gt;</span> <span class="kc">null</span><span class="p">,</span>
    <span class="p">)</span>
  <span class="p">);</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'rest_api_init'</span><span class="p">,</span> <span class="s1">'acf_rest_api'</span> <span class="p">);</span>
</code></pre></div></div>

<p>I was surprised to find that I didn’t have to add each field individually. I found a method that this could be done, but in my case it was easiest to just have all fields added, which will be especially helpful if I choose to add additional information in the future.</p>

<h2 id="setting-up-vue">Setting up Vue</h2>

<p>After adding the minified version of Vue to the page, the next step is to create a Vue instance. The entirety of this piece is as follows:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">apiURL</span> <span class="o">=</span> <span class="s1">'https://samhermes.co/reading-list/wp-json/wp/v2/posts?categories='</span>

<span class="kd">var</span> <span class="nx">books</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
  <span class="na">el</span><span class="p">:</span> <span class="s1">'#app'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">statuses</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Currently'</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Completed'</span> <span class="p">}</span>
    <span class="p">],</span>
    <span class="na">currentStatus</span><span class="p">:</span> <span class="s1">'1'</span><span class="p">,</span>
    <span class="na">books</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="na">created</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">()</span>
  <span class="p">},</span>
  <span class="na">watch</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">currentStatus</span><span class="p">:</span> <span class="s1">'fetchData'</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fetchData</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">()</span>
      <span class="kd">var</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span>
      <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span> <span class="nx">apiURL</span> <span class="o">+</span> <span class="nb">self</span><span class="p">.</span><span class="nx">currentStatus</span><span class="p">)</span>
      <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">self</span><span class="p">.</span><span class="nx">books</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">()</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<p>The first part we see here is the URL for the API. You’ll see that it ends sort of abruptly, allowing us to tack on an ID as we make the request. The default ID is 1, which matches the ID of the “Currently” category in WordPress. We set that as the default, so that as the page loads, it uses it for the initial request. When the user changes the current status (either “Currently” or “Completed”), we send the new ID along with the new request.</p>

<p>The methods section contains a function to fetch new data, and it is a fairly simple Ajax request. Vue watches for a change in <code class="highlighter-rouge">currentStatus</code> and performs a <code class="highlighter-rouge">fetchData</code> when it does.</p>

<h2 id="page-markup">Page Markup</h2>

<p>Vue needs a container to target, and it needs to match the ID in the <code class="highlighter-rouge">el</code> attribute that we’ve already created. It’s just a simple <code class="highlighter-rouge">&lt;div id="app"&gt;&lt;/div&gt;</code> that we’ll place all of the following code inside of.</p>

<p>This next part is what I’ve been poking around on still. The template that Vue uses to actually create the markup on the page can live in a couple of different places. Currently, I have it inside a couple of <code class="highlighter-rouge">&lt;template&gt;</code> tags on the page itself.</p>

<p>First, you can use a for loop in Vue to create a list of the possible statuses. For my example, I wanted two radio buttons that are labeled as “Currently” and “Completed.”</p>

<pre><code class="language-markup">&lt;template v-for="status in statuses"&gt;
  &lt;input type="radio"
  :id="status.id"
  :value="status.id"
  :name="status.id"
  v-model="currentStatus"&gt;
  &lt;label :for="status.id" v-html="status.title"&gt;&lt;/label&gt;
&lt;/template&gt;
</code></pre>

<p>It’s a little weird to be writing a for loop using markup, but it feels sort of familiar and it was pretty easy to understand what was going on. In this example, we just get a list of two radio buttons with corresponding labels. Here, attributes that have a “:” before them are dynamic, and they pull their value from the current <code class="highlighter-rouge">status</code> object. The attributes that have “v-” before them aren’t exactly dynamic, but they’re more like instructions for Vue. <code class="highlighter-rouge">v-model</code> hooks the inputs into Vue and gives them their interactivity. It communicates the current value of <code class="highlighter-rouge">currentStatus</code> to the Vue instance. <code class="highlighter-rouge">v-html</code> takes the status title and outputs it as text inside the label element.</p>

<p>As for the markup for the actual book list, it’s a fairly simple setup, and even easier to understand than the radio button markup. We wrap it in an unordered list tag and then create a for loop to iterate over each of the books, listing the title and author for each.</p>

<pre><code class="language-markup">&lt;ul class="book-list"&gt;
&lt;template v-for="book in books"&gt;
  &lt;li&gt;
    &lt;p class="book-title" v-html="book.title.rendered"&gt;&lt;/p&gt;
    &lt;p class="author" v-html="book.fields.author"&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/template&gt;
&lt;/ul&gt;
</code></pre>

<p>In this part, we’re referencing the author field that we added to the WP REST API by looking for the <code class="highlighter-rouge">fields</code> attribute of the current book. The field we created, named “author,” is available to us there.</p>

<h2 id="performance-concerns">Performance Concerns</h2>

<p>Using Vue is absolutely overkill for displaying a list of books. This specific project was definitely just a proof-of-concept so that I could dig into Vue. The Vue file minified is 90k on the server. My site uses CloudFlare, so I’m benefiting from their compression (I think, it’s magic), which gets it down to 30k when loaded in the browser. Not terrible by any means, but it was 0k of JavaScript when it was just a static list.</p>

<p>Aside from loading Vue, there’s also the small performance enhancement we could make of caching the responses. Since my reading list is fairly static, we could cache the response locally and just look for it in cache instead of going back out to the API. As it currently stands, toggling the current status back and forth results in a bunch of needless requests.</p>

  </div>

  <div class="about-me">
    <img src="/img/samhermes.jpg" alt="Sam Hermes">
    <div class="about-me-text">
      <p class="name">Sam Hermes</p>
      <p class="description">I'm a web developer at Washington University in St. Louis. I write about WordPress, CSS,
        JS, accessibility, and more.</p>
      <p><a href="/about">More About Me</a></p>
    </div>
  </div>
</article>
    </div>
    <footer class="site-footer group">
	<div class="contain">
		<ul class="site-nav">
			<li><a href="/about">About</a></li>
			<li><a href="/lists">Lists</a></li>
			<li><a href="https://samhermes.typeform.com/to/d4C4FT">Contact</a></li>
		</ul>

		<ul class="social">
			<li>
				<a href="https://teamtreehouse.com/samhermes">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35"><path d="M17.5 0C7.8 0 0 7.8 0 17.5S7.8 35 17.5 35 35 27.2 35 17.5 27.2 0 17.5 0zM28 22.1c0 .7-.5 1.6-1.1 1.9l-8.3 4.7c-.6.3-1.6.3-2.2 0L8.1 24c-.6-.3-1.1-1.2-1.1-1.9v-9.2c0-.7.5-1.6 1.1-1.9l8.3-4.7c.6-.3 1.6-.3 2.3.1l1.2.7c.7.4.7 1.5.1 2.6l-1.3 1.9c-.5 1-1.7 1.9-2.8 2.1h-.3c-1 .2-2.3-.1-2.8-.1-.3 0-.6.1-.8.3-.6.5-.7 1.3-.3 1.9.5.6 1.3.7 1.9.3l.3-.3c.2-.1.8-.2 1.5-.3h.4l1.8-1-2.1 1.6c-.1.1-.3.2-.4.3-.7.5-2 1.3-2.4 1.4l-.6.3c-.6.5-.7 1.5-.2 2.1.5.6 1.5.7 2.1.2.2-.2.3-.3.4-.5.2-.3.5-.7.8-1 .2-.1.6-.4.8-.6.4-.3.5-.3.5 0l.9-1.8-.8 3v.2l-.3.9c-.2.5-.3 1-.4 1l-.1.1c-.8.4-1.1 1.5-.7 2.3.4.8 1.5 1.1 2.3.7.8-.4 1.1-1.5.7-2.3 0-.1-.1-.1-.1-.2s.2-1 .5-2v-.1c.4-1 1.3-2 1.8-1.5.4.5.5 1.1.5 1.4-.1.2-.1.4 0 .6.3.8 1.1 1.2 1.9 1 .2-.1.4-.2.6-.4.6-.5.7-1.5.1-2.1-.3-.3-1.1-1.1-1.7-2V17c-.6-.9-.7-2-.2-3l1.3-2.3c.7-1.2 1.9-1.9 2.7-1.5l1.4.8c.6.3 1.1 1.2 1.1 1.9v9.2z" fill="#090909"/></svg>
					<span class="screen-reader-text">Sam Hermes on Treehouse</span>
				</a>
			</li>
			<li>
				<a href="https://codepen.io/samhermes">
					<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35"><path fill="#090909" d="M8.6 16v3l2.3-1.5zM16.6 13.7V9.4l-7.3 4.8 3.3 2.2zM25.7 14.2l-7.3-4.8v4.3l4 2.7zM9.3 20.8l7.3 4.8v-4.3l-4-2.7zM18.4 21.3v4.3l7.3-4.8-3.3-2.2zM17.5 15.3l-3.3 2.2 3.3 2.2 3.3-2.2z"/><path fill="#090909" d="M17.5.1C7.9.1.1 7.9.1 17.5c0 9.6 7.8 17.4 17.4 17.4 9.6 0 17.4-7.8 17.4-17.4C34.9 7.9 27.1.1 17.5.1zm10.8 20.7v.5h-.1L18 28.1c-.2.1-.3.2-.5.2s-.4-.1-.5-.2l-9.8-6.6h-.1v-.1-.1-.1-.1V14.4v-.1-.1-.1-.1-.1h.1l9.8-7c.3-.2.7-.2 1 0l9.8 6.6h.1v7.3z"/><path fill="#090909" d="M26.4 19v-3l-2.3 1.5z"/></svg>
					<span class="screen-reader-text">Sam Hermes on CodePen</span>
				</a>
			</li>
			<li>
				<a href="https://github.com/samhermes">
					<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35"><path fill-rule="evenodd" clip-rule="evenodd" fill="#090909" d="M17.5 0C7.8 0 0 7.9 0 17.5c0 7.7 5 14.3 12 16.6.9.2 1.2-.4 1.2-.8v-3c-4.9 1.1-6-2.3-6-2.3-.8-2-1.9-2.6-1.9-2.6-1.6-1.1.1-1.1.1-1.1 1.8.1 2.7 1.8 2.7 1.8 1.6 2.7 4.1 1.9 5.1 1.5.2-1.1.6-1.9 1.1-2.3-3.9-.4-8-1.9-8-8.6 0-1.9.7-3.5 1.8-4.7-.1-.5-.7-2.3.2-4.7 0 0 1.5-.5 4.8 1.8 1.4-.4 2.9-.6 4.4-.6 1.5 0 3 .2 4.4.6 3.3-2.3 4.8-1.8 4.8-1.8 1 2.4.4 4.2.2 4.6 1.1 1.2 1.8 2.8 1.8 4.7 0 6.7-4.1 8.2-8 8.6.6.5 1.2 1.6 1.2 3.2v4.8c0 .5.3 1 1.2.8 6.9-2.3 12-8.9 12-16.6C35 7.9 27.2 0 17.5 0z"/></svg>
					<span class="screen-reader-text">Sam Hermes on GitHub</span>
				</a>
			</li>
		</ul>
	</div>
</footer>




<script src="/js/prism.js"></script>




</html>
</body>