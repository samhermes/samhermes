<!DOCTYPE html>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Unregistering widgets in WordPress</title>
<meta name="description" content="If you’ve ever installed Jetpack, you’re probably familiar with widget overload. Sometimes it’s better to cut down on the number of widgets available to your...">

<link rel="stylesheet" href="/css/main.css">

<link rel="canonical" href="https://samhermes.com/posts/unregistering-widgets-in-wordpress/">
<link rel="alternate" type="application/rss+xml" title="Sam Hermes" href="https://samhermes.com/feed.xml">

<header class="site-header group">
	
	    <a class="logomark" href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 292 292"><title>Sam Hermes</title><circle cx="146" cy="146" r="146" fill="#fafafa"/><path d="M86.2 190.41l19-15c10.6 17.2 25.4 25.2 43.8 25.2 19.6 0 29.8-9.6 29.8-22.8 0-17.4-18.6-20.8-38.2-25C118 148.21 94 142.21 94 113c0-22.8 20.8-41.8 50.2-41.8 25 0 41.4 9 55.6 25l-18 14.2C173.2 98.81 163.2 91 144.2 91c-19.6 0-27.8 9.2-27.8 21.8 0 14.8 17.2 17.6 36.2 21.6 23 4.8 48.6 11.4 48.6 43.2 0 22.4-18.4 43.6-51.6 43.6-30.4.01-49.6-11.99-63.4-30.79z" fill="#1d1d1d"/></svg></a>
	
    <ul class="site-nav">
      <li><a href="/posts">Posts</a></li>
      <li><a href="/about">About</a></li>
    </ul>
</header>

<div class="page">
<article class="post">

  <header class="post-header">
    <p class="post-meta"><time>June 3, 2017</time></p>
    <h2 class="post-title">Unregistering widgets in WordPress</h2>
  </header>

  <div class="post-content">
    <p>If you’ve ever installed Jetpack, you’re probably familiar with widget overload. Sometimes it’s better to cut down on the number of widgets available to your users, both for the benefit of their cognitive load and just for the fact that they may never use some of them. Meta widget, anyone?</p>

<p>Unregistering a widget is a fairly small bit of code, but getting all of the information you need can sometimes be the tricky part.</p>

<p>Here is a function that hooks into the <code class="highlighter-rouge">widgets_init</code> action in WordPress, and in the function it calls <code class="highlighter-rouge">unregister_widget()</code> on the widget to remove, the meta widget in this case.</p>

<pre><code class="language-php">function unregister_widgets() {
  unregister_widget( 'WP_Meta' );
}
add_action( 'widgets_init', 'unregister_widgets' );</code></pre>

<p>Where do we know to get the class of the widget though? For all of the WordPress core widgets, you can <a href="https://codex.wordpress.org/Function_Reference/unregister_widget">reference the codex</a>, where all of the widget names are listed. Each starts with <code class="highlighter-rouge">WP_</code>.</p>

<p>What about widgets that come from other sources, such as a plugin or theme? That can take a little more work. The first and easiest way is to search the source code, and see if you can find where <code class="highlighter-rouge">register_widget()</code> is being called. In Sublime Text or Atom, you could perform a Find in Files for anywhere that <code class="highlighter-rouge">register_widget</code> appears in the project and grab the class name from there.</p>

<p>If you don’t have the plugin or theme locally, you could also search the repository on GitHub. Opening the <a href="https://github.com/Automattic/Jetpack">Jetpack repository</a>, the search field in the header will perform searches only within the current repository, so a search for <code class="highlighter-rouge">register_widget</code> there will return the same results as if we had searched in a text editor.</p>

<p>One last piece is adding a conditional to only unregister widgets if the plugin is actually active. It appears that <code class="highlighter-rouge">unregister_widget</code> fails gracefully if it can’t find the widget class, but it would be better to just ignore it entirely if the plugin or theme isn’t active. This might take a little investigation as well, but you can check to see if the main class of the plugin exists.</p>

<pre><code class="language-php">if ( class_exists( 'Jetpack' ) ) {
  unregister_widget( 'Jetpack_Gallery_Widget' );
}</code></pre>

<p>If you’re unregistering a group of Jetpack widgets, adding this conditional will be much faster than checking for each widget individually.</p>

  </div>

  <div class="about-me">
  	<img src="/img/samhermes-175.jpg" srcset="/img/samhermes-350.jpg 2x, /img/samhermes-525.jpg 3x" alt="Sam Hermes">
  	<p class="name">Sam Hermes</p>
  	<p class="description">I'm a web developer at Washington University in St. Louis. I write about WordPress, PHP, CSS, SVG, and more. <a href="/about">More about me &rarr;</a></p>
  </div>
</article>

</div>
<footer class="site-footer group">
	<ul class="site-nav">
		<li><a href="/posts">Posts</a></li>
		<li><a href="/about">About</a></li>
	</ul>
	<svg xmlns="http://www.w3.org/2000/svg" width="30" height="18" viewBox="0 0 30 18" class="pride"><path fill="#E40303" d="M0 0h30v3H0z"/><path fill="#FF8C00" d="M0 3h30v3H0z"/><path fill="#FFED00" d="M0 6h30v3H0z"/><path fill="#008026" d="M0 9h30v3H0z"/><path fill="#004DFF" d="M0 12h30v3H0z"/><path fill="#750787" d="M0 15h30v3H0z"/></svg>
	<ul class="social">
		<li><a href="https://twitter.com/samhermes"><img src="/img/twitter.svg"></a></li>
		<li><a href="https://github.com/samhermes"><img src="/img/github.svg"></a></li>
	</ul>
</footer>


  
<script src='/js/prism.js' type="text/javascript"></script>
  


