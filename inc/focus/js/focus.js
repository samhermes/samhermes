const focus=e=>{const t=document.querySelector("body");let c={startingItem:"",currentItem:"",images:"",imageCount:0,isLoading:!1,currentFocus:""};const s=()=>{const e=document.createElement("div");e.classList.add("focus-stage"),e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","focus-stage-title");const c=document.createElement("h1");c.innerText="Photo Gallery",c.setAttribute("id","focus-stage-title"),c.setAttribute("class","screen-reader-text"),e.appendChild(c);const s=o();e.appendChild(s);const a=document.createElement("div");a.classList.add("focus-podium"),e.appendChild(a);const i=n();e.appendChild(i);const d=r();e.appendChild(d),t.appendChild(e)},n=()=>{const e=document.createElement("button");return e.innerHTML='<span class="screen-reader-text">Close</span>',e.classList.add("focus-close"),e},r=()=>{const e=document.createElement("div");e.classList.add("focus-controls");const t=document.createElement("button");t.innerHTML='<span class="screen-reader-text">Next</span>',t.classList.add("focus-next"),e.appendChild(t);const c=document.createElement("button");return c.innerHTML='<span class="screen-reader-text">Previous</span>',c.classList.add("focus-previous"),e.appendChild(c),e},o=()=>{const e=document.createElement("div");return e.innerHTML='<svg class="loading-icon" viewBox="25 25 50 50" stroke-width="2"><circle cx="50" cy="50" r="20" /></svg><span class="screen-reader-text">Loading</span>',e.classList.add("focus-loading"),e},a=e=>{const t=document.querySelector(".focus-stage"),c=[].slice.call(t.querySelectorAll(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join()));if(9===e.keyCode){var s=c.indexOf(document.activeElement);e.shiftKey||s!==c.length-1?!e.shiftKey||0!==s&&-1!==s||(c[c.length-1].focus(),e.preventDefault()):(c[0].focus(),e.preventDefault())}},i=e=>{t.classList.add("focus-stage-open"),1===c.imageCount&&(document.querySelector(".focus-stage").classList.add("controls-hidden"),document.querySelector(".focus-previous").setAttribute("disabled",""),document.querySelector(".focus-next").setAttribute("disabled",""));const s=document.createElement("ul");c.images.forEach((e,t)=>{const n=document.createElement("li"),r=document.createElement("figure"),o=document.createElement("img");if(o.setAttribute("src",e.imageUrl),o.setAttribute("alt",e.imageAlt),r.appendChild(o),n.appendChild(r),n.classList.add("stage-item"),""!==e.imageCaption){const t=document.createElement("figcaption");t.innerText=e.imageCaption,r.appendChild(t),n.classList.add("has-caption")}t===c.startingItem&&(n.classList.add("is-active","is-first"),f(o)),s.appendChild(n)});const n=document.querySelector(".focus-podium");setTimeout(()=>n.appendChild(s),150),document.addEventListener("click",d),document.addEventListener("keydown",d),(e=>{c.currentFocus=e.currentTarget,document.addEventListener("keydown",a)})(e),1===c.imageCount?document.querySelector(".focus-close").focus():document.querySelector(".focus-next").focus()},d=e=>{"click"===e.type&&e.target&&"focus-next"==e.target.className&&u(),"click"===e.type&&e.target&&"focus-previous"==e.target.className&&m(),"click"===e.type&&e.target&&"focus-close"==e.target.className&&l(),"Escape"===e.key&&l(),37===e.keyCode&&m(),39===e.keyCode&&u()},l=()=>{t.classList.remove("focus-stage-open"),document.querySelector(".focus-stage").classList.remove("controls-hidden"),document.querySelector(".focus-previous").removeAttribute("disabled"),document.querySelector(".focus-next").removeAttribute("disabled");const e=document.querySelector(".focus-podium");e.innerHTML="",e.classList.remove("has-caption"),document.removeEventListener("click",d),document.removeEventListener("keydown",d),c.currentFocus.focus(),document.removeEventListener("keydown",a)},u=()=>{c.currentItem+1<c.imageCount?c.currentItem=c.currentItem+1:c.currentItem=0,document.querySelector(".is-active").classList.remove("is-active"),document.querySelectorAll(".stage-item")[c.currentItem].classList.add("is-active")},m=()=>{c.currentItem-1<0?c.currentItem=c.imageCount-1:c.currentItem=c.currentItem-1,document.querySelector(".is-active").classList.remove("is-active"),document.querySelectorAll(".stage-item")[c.currentItem].classList.add("is-active")},p=(e,t,s)=>{t.preventDefault(),c.startingItem=e,c.currentItem=e,c.images=s,c.imageCount=s.length,i(t)},g=e=>{const t=e.children.length>1?Array.from(e.children):[e],c=Array.from(t).map(e=>(e=>{return{imageUrl:e.href||e.querySelector("a").href,imageAlt:e.querySelector("img")?e.querySelector("img").alt:"",imageCaption:e.querySelector("figcaption")?e.querySelector("figcaption").innerText:""}})(e));for(let e=0;e<t.length;e++){t[e].querySelector("a").addEventListener("click",t=>p(e,t,c))}},f=e=>{const t=document.querySelector(".focus-loading"),s=()=>{c.isLoading=!1,t.classList.remove("is-active"),e.removeEventListener("load",s)};e.complete?s():(c.isLoading=!0,t.classList.add("is-active"),e.addEventListener("load",s),e.addEventListener("error",s))};(()=>{const t=e&&e.selector?e.selector:".focus-gallery",c=document.querySelectorAll(t);c&&(s(),Array.from(c).forEach(e=>{g(e)}))})()};